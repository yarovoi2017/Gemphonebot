# Система Памяти Джека

## 🎯 Цель

Никогда не терять контекст диалога. Автоматически сохранять информацию о пользователе, проектах и важных событиях.

## 🧠 Архитектура Памяти

```
┌─────────────────────────────────────────────┐
│           Рабочая Память (128K)             │
│   Текущий диалог + недавний контекст        │
└──────────────────┬──────────────────────────┘
                   │
                   ▼
┌─────────────────────────────────────────────┐
│         Векторная Память (RAG)              │
│   ChromaDB — семантический поиск            │
└──────────────────┬──────────────────────────┘
                   │
                   ▼
┌─────────────────────────────────────────────┐
│          Долговременная Память              │
│            Obsidian Vault                   │
│  ~/vault/                                   │
│    ├── People/      ← Профили               │
│    ├── Daily/       ← История диалогов      │
│    ├── Topics/      ← Темы                  │
│    ├── Projects/    ← Проекты               │
│    └── _system/     ← Системные данные      │
└─────────────────────────────────────────────┘
```

## 📦 Установленные Скиллы Памяти

| Скилл | Назначение |
|-------|-----------|
| **rag** | Retrieval-Augmented Generation |
| **obsidian** | Интеграция с Obsidian |
| **obsidian-conversation-backup** | Автосохранение диалогов |
| **memory** | Базовое управление памятью |
| **memory-manager** | Продвинутое управление |
| **elite-longterm-memory** | Уровневая память |
| **chromadb-memory** | Векторное хранилище |
| **neural-memory** | Нейронный контекст |
| **context-optimizer** | Оптимизация контекста |

## 📂 Структура Vault

```
~/vault/
├── People/
│   └── Максим Яровой.md     ← Профиль пользователя
├── Daily/
│   └── 2026-02-14.md        ← История диалогов
├── Topics/
│   └── Memory System.md     ← Тематические заметки
├── Projects/
│   └── OpenClaw Setup/      ← Проекты
└── _system/
    ├── memories/            ← Важные воспоминания
    ├── context/             ← Контексты
    └── embeddings/          ← Векторы
```

## 🛠️ Утилиты

### Управление памятью

```bash
# Инициализация vault
~/.openclaw/workspace/scripts/obsidian-memory.sh init

# Сохранить диалог
~/.openclaw/workspace/scripts/obsidian-memory.sh save "Тема" "Содержание"

# Обновить профиль
~/.openclaw/workspace/scripts/obsidian-memory.sh profile "Имя" "Поле" "Значение"

# Сохранить важную память
~/.openclaw/workspace/scripts/obsidian-memory.sh memory "категория" "заголовок" "текст"

# Поиск
~/.openclaw/workspace/scripts/obsidian-memory.sh search "запрос"

# Создать тему
~/.openclaw/workspace/scripts/obsidian-memory.sh topic "Название" "Содержание"

# Создать проект
~/.openclaw/workspace/scripts/obsidian-memory.sh project "Название" "Описание"

# Список заметок
~/.openclaw/workspace/scripts/obsidian-memory.sh list
```

## 💾 Что Автоматически Сохраняется

### 1. Диалоги
- Каждый разговор → `Daily/YYYY-MM-DD.md`
- Ссылки на темы и людей
- Код и решения

### 2. Профиль Пользователя
- Имя, предпочтения
- Технические детали (устройства, настройки)
- Проекты
- Важные факты

### 3. Важные Воспоминания
- Ключевые решения
- Настройки системы
- Личные предпочтения

### 4. Темы
- Технологии (Linux, Docker, Python...)
- Концепции (MoE, RAG, Memory...)
- Инструкции

### 5. Проекты
- OpenClaw Setup
- OpenWRT Router
- Ubuntu Server
- И другие

## 🔍 Как Происходит Поиск

### Векторный Поиск (RAG)
```
Запрос пользователя
    ↓
Векторизация запроса
    ↓
Поиск в ChromaDB
    ↓
Получение релевантных документов
    ↓
Обогащение промпта
    ↓
Генерация ответа
```

### Структурированный Поиск (Obsidian)
```
Запрос → Поиск по:
- Именам файлов
- Тегам
- Связям [[...]]
- Содержимому
- Метаданным
```

## 📝 Пример Использования

### Сохранение Информации

```bash
# Профиль
obsidian-memory profile "Максим Яровой" "Проекты" "OpenWRT, Ubuntu, AI"

# Важная память
obsidian-memory memory "preferences" "Стиль общения" "Максим предпочитает краткие технические ответы без лишних слов"

# Проект
obsidian-memory project "OpenWRT Router" "Настройка роутера с VPN на Timeweb"
```

### Последующий Диалог

```
Пользователь: «Какой у меня роутер?»

AI (используя память):
1. Запрос в ChromaDB: «роутер OpenWRT»
2. Найдено: Профиль Максима, Проект OpenWRT Router
3. Ответ: «У тебя OpenWRT роутер, который нужно настроить 
   с VPN на Timeweb. Проект создан 16.02.2026.»
```

## 🔄 Интеграция с OpenClaw

### Конфигурация

```json
{
  "memory": {
    "backend": "qmd",
    "citations": "on",
    "qmd": {
      "paths": [
        {
          "path": "~/vault/People",
          "name": "People"
        },
        {
          "path": "~/vault/Topics",
          "name": "Topics"
        },
        {
          "path": "~/vault/Daily",
          "name": "Daily"
        }
      ]
    }
  }
}
```

## 📋 Статус

- ✅ Vault инициализирован
- ✅ Профиль Максима создан
- ✅ Скрипты управления установлены
- ⏳ Интеграция с ChromaDB
- ⏳ Автоматическое сохранение диалогов
- ⏳ Настройка RAG pipeline

## 🚀 Следующие Шаги

1. Настроить автосохранение всех диалогов
2. Инициализировать ChromaDB с векторами
3. Настроить ежедневную синхронизацию
4. Создать граф знаний
5. Настроить периодическое резервное копирование

## 🔗 Ссылки

- [[Memory System Architecture]] — подробная архитектура
- [[Obsidian Configuration]] — настройка Obsidian
- [[People/Максим Яровой]] — профиль пользователя
