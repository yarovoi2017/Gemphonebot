{
  "name": "Jack (Gemphonbot) Notification Handler",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "jack-notify",
        "responseMode": "responseNode",
        "options": {}
      },
      "name": "Jack Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [250, 300],
      "webhookId": "jack-notification"
    },
    {
      "parameters": {
        "jsCode": "const body = $input.first().json.body;\n\n// Validate request\nif (!body || !body.agent || body.agent !== 'jack') {\n  return [{ json: { error: 'Invalid agent' } }];\n}\n\n// Parse event\nconst event = body.event;\nconst data = body.data || {};\n\nlet message = '';\nlet priority = 'normal';\n\nswitch (event) {\n  case 'vault_updated':\n    message = `üìÅ Vault –æ–±–Ω–æ–≤–ª—ë–Ω –î–∂–µ–∫–æ–º\\n\\n–§–∞–π–ª: ${data.file || 'unknown'}\\n–ö–æ–º–º–∏—Ç: ${data.commit || 'N/A'}`;\n    break;\n    \n  case 'task_created':\n    message = `üìã –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –æ—Ç –î–∂–µ–∫–∞\\n\\n–ó–∞–¥–∞—á–∞: ${data.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'}\\n–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: ${data.priority || 'normal'}\\n\\n${data.description || ''}`;\n    priority = data.priority === 'high' ? 'high' : 'normal';\n    break;\n    \n  case 'task_completed':\n    message = `‚úÖ –î–∂–µ–∫ –≤—ã–ø–æ–ª–Ω–∏–ª –∑–∞–¥–∞—á—É\\n\\n–ó–∞–¥–∞—á–∞: ${data.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'}\\n–†–µ–∑—É–ª—å—Ç–∞—Ç: ${data.result || '–ì–æ—Ç–æ–≤–æ'}`;\n    break;\n    \n  case 'secret_request':\n    message = `üîë –î–∂–µ–∫ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–µ–∫—Ä–µ—Ç\\n\\n–ù–∞–∑–≤–∞–Ω–∏–µ: ${data.secret_name || 'unknown'}\\n–ü—Ä–∏—á–∏–Ω–∞: ${data.reason || '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}`;\n    priority = 'high';\n    break;\n    \n  case 'help_needed':\n    message = `üÜò –î–∂–µ–∫—É –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å!\\n\\n–í–æ–ø—Ä–æ—Å: ${data.question || '–ù–µ —É–∫–∞–∑–∞–Ω'}\\n–ö–æ–Ω—Ç–µ–∫—Å—Ç: ${data.context || '–ù–µ—Ç'}`;\n    priority = 'high';\n    break;\n    \n  case 'status_update':\n    message = `üìä –°—Ç–∞—Ç—É—Å –æ—Ç –î–∂–µ–∫–∞\\n\\n${data.message || '–°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—ë–Ω'}`;\n    break;\n    \n  default:\n    message = `üì® –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –î–∂–µ–∫–∞\\n\\n–°–æ–±—ã—Ç–∏–µ: ${event}\\n–î–∞–Ω–Ω—ã–µ: ${JSON.stringify(data, null, 2)}`;\n}\n\nreturn [{\n  json: {\n    event: event,\n    message: message,\n    priority: priority,\n    raw_data: data,\n    timestamp: new Date().toISOString()\n  }\n}];"
      },
      "name": "Parse Jack Event",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [450, 300]
    },
    {
      "parameters": {
        "conditions": {
          "options": {"typeValidation": "strict"},
          "conditions": [
            {
              "id": "is-high",
              "leftValue": "={{ $json.priority }}",
              "rightValue": "high",
              "operator": {"type": "string", "operation": "equals"}
            }
          ]
        }
      },
      "name": "High Priority?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [650, 300]
    },
    {
      "parameters": {
        "chatId": "5334588631",
        "text": "=üîî *–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç –î–∂–µ–∫–∞ (Gemphonbot)*\n\n{{ $json.message }}\n\n_–í—Ä–µ–º—è: {{ $json.timestamp }}_",
        "options": {
          "parse_mode": "Markdown",
          "disable_notification": false
        }
      },
      "name": "Notify Me (High Priority)",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [850, 200],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-api",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "chatId": "5334588631",
        "text": "={{ $json.message }}",
        "options": {
          "disable_notification": true
        }
      },
      "name": "Notify Me (Normal)",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [850, 400],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-api",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "json",
        "options": {
          "responseCode": 200
        },
        "responseBody": "={{ JSON.stringify({ success: true, received: $now }) }}"
      },
      "name": "Success Response",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [1050, 300]
    },
    {
      "parameters": {
        "fileName": "=jack-events-{{ Date.now() }}.json",
        "fileContent": "={{ JSON.stringify($json, null, 2) }}",
        "options": {
          "append": true
        }
      },
      "name": "Log to File",
      "type": "n8n-nodes-base.writeFile",
      "typeVersion": 1,
      "position": [850, 550]
    }
  ],
  "connections": {
    "Jack Webhook": {
      "main": [[{"node": "Parse Jack Event", "type": "main", "index": 0}]]
    },
    "Parse Jack Event": {
      "main": [
        [{"node": "High Priority?", "type": "main", "index": 0}],
        [{"node": "Log to File", "type": "main", "index": 0}]
      ]
    },
    "High Priority?": {
      "main": [
        [{"node": "Notify Me (High Priority)", "type": "main", "index": 0}],
        [{"node": "Notify Me (Normal)", "type": "main", "index": 0}]
      ]
    },
    "Notify Me (High Priority)": {
      "main": [[{"node": "Success Response", "type": "main", "index": 0}]]
    },
    "Notify Me (Normal)": {
      "main": [[{"node": "Success Response", "type": "main", "index": 0}]]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "saveManualExecutions": true
  },
  "active": false
}
